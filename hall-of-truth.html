<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Hall of Truth Portal - 42 Forces of Ma'at - $911</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Georgia:ital,wght@0,400;0,700;1,400&display=swap');

        body.temple-page {
            background: linear-gradient(rgba(8, 0, 26, 0.92), rgba(20, 10, 40, 0.88)),
                        url('images/hall-of-truth-bg.jpg') center/cover no-repeat fixed;
            background-color: #140025;
            color: #f7eaff;
            font-family: "Georgia", serif;
            margin: 0;
            padding: 40px 20px;
            line-height: 1.7;
            min-height: 100vh;
        }

        h1, h2, h3, h4 {
            color: #FFD700;
            margin-top: 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        a {
            color: #8c78ff;
            text-decoration: none;
        }
        a:hover {
            color: #FFD700;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
            background: rgba(20, 0, 37, 0.65);
            border-radius: 12px;
            border: 1px solid #FFD700;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .container::before {
            content: "ìÅ¶ ìÉ© ìÜ£ ìÄ≠";
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            opacity: 0.08;
            color: #FFD700;
            z-index: 0;
        }

        .header {
            text-align: center;
            padding-bottom: 40px;
            border-bottom: 1px solid rgba(255, 215, 0, 0.25);
            margin-bottom: 50px;
        }

        h1 {
            font-size: 3.5em;
            margin: 30px 0 20px;
            font-weight: 700;
        }

        .hieroglyph-title {
            font-size: 2em;
            margin-bottom: 15px;
            opacity: 0.6;
            color: #FFD700;
        }

        .subtitle {
            color: #d4bfff;
            font-size: 1.4em;
            margin: 20px 0 40px;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
            font-weight: 300;
        }

        .course-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 40px 0;
            flex-wrap: wrap;
        }

        .stat-box {
            background: rgba(255,255,255,0.06);
            border: 1px solid #FFD700;
            border-radius: 12px;
            padding: 20px 25px;
            min-width: 160px;
            text-align: center;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
        }

        .stat-number {
            display: block;
            font-size: 2.5em;
            color: #FFD700;
            font-weight: bold;
            text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
        }

        .stat-label {
            font-size: 0.85em;
            color: #d4bfff;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .price-display {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(128, 0, 128, 0.2));
            border: 2px solid #FFD700;
            border-radius: 12px;
            padding: 25px;
            margin: 30px auto;
            max-width: 600px;
            text-align: center;
        }

        .price-tag {
            font-size: 3.5em;
            color: #FFD700;
            font-weight: bold;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            margin: 10px 0;
        }

        .price-label {
            font-size: 1.2em;
            color: #d4bfff;
            margin-bottom: 15px;
        }

        .weeks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin: 50px 0;
        }

        .week-card {
            background: rgba(255,255,255,0.06);
            border: 1px solid #FFD700;
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .week-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(255, 215, 0, 0.25);
        }

        .week-card.free {
            border-color: #FFD700;
            background: rgba(255, 215, 0, 0.08);
        }

        .week-card.paid {
            border-color: #8c78ff;
            background: rgba(140, 120, 255, 0.08);
        }

        .week-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .week-number {
            background: #FFD700;
            color: #140025;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
        }

        .force-count {
            background: rgba(255, 215, 0, 0.15);
            color: #FFD700;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .week-card h3 {
            color: #FFD700;
            margin: 0 0 12px 0;
            font-size: 1.6em;
            min-height: 55px;
            line-height: 1.3;
            font-weight: 700;
            text-shadow: 0 0 6px rgba(255, 215, 0, 0.5);
        }

        .kemetic-name {
            color: #FFD700;
            font-style: italic;
            font-size: 1em;
            margin-bottom: 12px;
            opacity: 0.9;
        }

        .week-theme {
            color: #f7eaff;
            font-size: 1em;
            margin-bottom: 20px;
            line-height: 1.6;
            min-height: 70px;
            border-left: 3px solid #FFD700;
            padding-left: 12px;
        }

        .forces-preview {
            background: rgba(255, 215, 0, 0.05);
            padding: 12px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 0.85em;
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .force-item {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 6px 0;
            color: #d4bfff;
        }

        .force-item::before {
            content: "‚Ä¢";
            color: #FFD700;
            font-size: 1.2em;
        }

        .week-link {
            display: block;
            background: #330066;
            color: #FFD700;
            padding: 14px 25px;
            text-decoration: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 1.1em;
            text-align: center;
            border: 2px solid #FFD700;
            transition: all 0.3s ease;
            margin-top: 20px;
            cursor: pointer;
            font-family: "Georgia", serif;
        }

        .week-link:hover {
            background: #4c0099;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
        }

        .week-link.free {
            background: rgba(255, 215, 0, 0.15);
        }

        .week-link.paid {
            background: linear-gradient(135deg, #8c78ff, #6600cc);
            color: white;
            border-color: #8c78ff;
        }

        .week-link.paid:hover {
            background: linear-gradient(135deg, #a394ff, #7a3dff);
            box-shadow: 0 0 20px rgba(140, 120, 255, 0.4);
        }

        .portal-description {
            text-align: center;
            padding: 40px;
            background: rgba(255,255,255,0.06);
            border: 1px solid #FFD700;
            border-radius: 12px;
            margin: 50px 0;
            line-height: 1.8;
            font-size: 1.1em;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.1);
        }

        .maat-principle {
            color: #FFD700;
            font-size: 1.2em;
            margin: 25px 0;
            font-style: italic;
            text-shadow: 0 0 6px rgba(255, 215, 0, 0.5);
        }

        .initiation-badge {
            display: inline-block;
            background: rgba(255, 215, 0, 0.1);
            padding: 15px 30px;
            border-radius: 8px;
            color: #FFD700;
            font-weight: bold;
            margin: 25px 0;
            border: 1px solid #FFD700;
            letter-spacing: 1px;
        }

        .payment-badge {
            display: inline-block;
            background: linear-gradient(135deg, #8c78ff, #6600cc);
            padding: 15px 30px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            margin: 25px 0;
            border: 1px solid #FFD700;
            letter-spacing: 1px;
            box-shadow: 0 0 20px rgba(140, 120, 255, 0.3);
        }

        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 215, 0, 0.25);
            color: #d4bfff;
            font-size: 0.95em;
        }

        @media (max-width: 768px) {
            .container { padding: 25px; }
            h1 { font-size: 2.5em; }
            .weeks-grid { grid-template-columns: 1fr; }
            .course-stats { gap: 15px; }
            .stat-box { min-width: 120px; }
            .price-tag { font-size: 2.5em; }
        }

        .hieroglyph-bg {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: -1;
            opacity: 0.02;
        }

        .glyph {
            position: absolute;
            font-size: 1.5em;
            animation: float 30s infinite linear;
            color: #FFD700;
        }

        @keyframes float {
            0% { transform: translateY(100vh) rotate(0deg); }
            100% { transform: translateY(-100px) rotate(360deg); }
        }

        /* Payment Modal Styles */
        #paymentModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.95);
            z-index: 10000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #140025, #330066);
            border: 3px solid #FFD700;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            color: white;
            font-family: "Georgia", serif;
            box-shadow: 0 0 50px rgba(255, 215, 0, 0.3);
        }

        .modal-content h2 {
            color: #FFD700;
            margin-bottom: 20px;
        }

        .modal-button {
            background: linear-gradient(135deg, #FFD700, #B8860B);
            color: #140025;
            border: none;
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            margin: 10px;
            font-family: "Georgia", serif;
            transition: all 0.3s ease;
        }

        .modal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.4);
        }

        .token-input {
            padding: 15px;
            width: 80%;
            border: 2px solid #FFD700;
            background: rgba(255,255,255,0.1);
            color: white;
            border-radius: 8px;
            font-size: 1.1em;
            text-align: center;
            margin: 15px 0;
            font-family: "Georgia", serif;
        }

        .secondary-button {
            background: #330066;
            color: #FFD700;
            border: 2px solid #FFD700;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-family: "Georgia", serif;
        }

        .cancel-button {
            background: transparent;
            color: #999;
            border: 1px solid #666;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin: 5px;
            font-family: "Georgia", serif;
        }

        .purchase-cta {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.15), rgba(140, 120, 255, 0.15));
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }

        .purchase-cta h3 {
            color: #FFD700;
            margin-bottom: 15px;
        }

        .benefits-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
            text-align: left;
        }

        .benefit-item {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #FFD700;
        }
    </style>
</head>
<body class="temple-page">

    <!-- Animated hieroglyph background -->
    <div class="hieroglyph-bg" id="hieroglyph-bg"></div>

    <div class="container">
        <div class="header">
            <div class="hieroglyph-title">ìÅ¶ ìÉ© ìÜ£ ìÄ≠</div>
            <h1>THE HALL OF TRUTH PORTAL</h1>
            <div class="subtitle">Initiation Through the 42 Forces of Ma'at ‚Ä¢ 7 Sacred Gateways to Divine Alignment</div>

            <div class="course-stats">
                <div class="stat-box">
                    <span class="stat-number">42</span>
                    <span class="stat-label">Divine Forces</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">7</span>
                    <span class="stat-label">Sacred Gateways</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">49</span>
                    <span class="stat-label">Days of Initiation</span>
                </div>
                <div class="stat-box">
                    <span class="stat-number">911</span>
                    <span class="stat-label">Sacred Investment</span>
                </div>
            </div>

            <div class="price-display">
                <div class="price-label">Full Lifetime Access to Complete Curriculum</div>
                <div class="price-tag">$911</div>
                <div class="price-label">One-time payment ‚Ä¢ Complete Weeks 2-7</div>
            </div>
        </div>

        <div class="portal-description">
            <p>Welcome, Seeker of Truth. You stand before the Hall of Ma'at, where 42 cosmic forces await your alignment.</p>

            <div class="maat-principle">
                "This is not a checklist of sins, but a map of the 42 threads that weave the garment of Ma'at."
            </div>

            <p>Each gateway represents an active force of cosmic order. To pass through is to demonstrate that your life is a perfect microcosm of divine law.</p>
            
            <div class="initiation-badge">
                ìÇÄ Week 1: FREELY GIVEN ìÇÄ
            </div>
            <div class="payment-badge">
                ìÇÄ Weeks 2-7: SACRED INVESTMENT ($911) ìÇÄ
            </div>
        </div>

        <div class="purchase-cta">
            <h3>What Your Sacred Investment Grants:</h3>
            <div class="benefits-list">
                <div class="benefit-item">
                    <strong>6 Complete Gateways</strong>
                    <p>Full access to Weeks 2-7 of the journey</p>
                </div>
                <div class="benefit-item">
                    <strong>35 Divine Forces</strong>
                    <p>In-depth study of Judges 8-42</p>
                </div>
                <div class="benefit-item">
                    <strong>Lifetime Access</strong>
                    <p>Return to the teachings anytime, forever</p>
                </div>
                <div class="benefit-item">
                    <strong>All Workbooks & Meditations</strong>
                    <p>Downloadable PDFs and audio guides</p>
                </div>
            </div>
            <button onclick="goToPayment()" class="week-link paid" style="display: inline-block; width: auto;">
                üèõÔ∏è Make Sacred Investment ($911)
            </button>
        </div>

        <div class="weeks-grid">
            <!-- Week 1: The Extended Stride (FREE) -->
            <div class="week-card free">
                <div class="week-header">
                    <div class="week-number">1</div>
                    <div class="force-count">FREE ACCESS</div>
                </div>
                <h3>The Extended Stride</h3>
                <div class="kemetic-name">Judges 1-7</div>
                <div class="week-theme">
                    Foundation of cosmic alignment. Learn to walk within divine bounds, honor sacred vessels, and practice true ownership.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Judge 1: Staying Within Divine Bounds</div>
                    <div class="force-item">Judge 2: Honoring Sacred Vessels</div>
                    <div class="force-item">Judge 3: True Energy Ownership</div>
                    <div class="force-item">Judge 4: Divine Timing</div>
                </div>
                <a href="portal/week1/index.html" class="week-link free">ìÅ¶ Access Free Gateway ìÅ¶</a>
            </div>

            <!-- Week 2: The Sacred Flame (PAID) -->
            <div class="week-card paid">
                <div class="week-header">
                    <div class="week-number">2</div>
                    <div class="force-count">Judges 8-14</div>
                </div>
                <h3>The Sacred Flame</h3>
                <div class="kemetic-name">Sacred Speech & Divine Trust</div>
                <div class="week-theme">
                    Mastery of creative speech and divine trust. Learn truthful manifestation, protect the vulnerable, and be a source of peace.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Judge 8: Truthful Creative Speech</div>
                    <div class="force-item">Judge 9: Protecting Foundations</div>
                    <div class="force-item">Judge 10: Ejecting Corruption</div>
                    <div class="force-item">Judge 11: Clear Lineages</div>
                </div>
                <button onclick="checkAccess(2)" class="week-link paid">Enter Sacred Gateway ‚Üí</button>
            </div>

            <!-- Week 3: The Veil & The Voice (PAID) -->
            <div class="week-card paid">
                <div class="week-header">
                    <div class="week-number">3</div>
                    <div class="force-count">Judges 15-21</div>
                </div>
                <h3>The Veil & The Voice</h3>
                <div class="kemetic-name">Integrity & Sacred Restraint</div>
                <div class="week-theme">
                    Integrity and sacred restraint. Walk straight paths, honor creation's work, and maintain personal purity.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Judge 15: The Straight Path</div>
                    <div class="force-item">Judge 16: Honoring Creation</div>
                    <div class="force-item">Judge 17: Respecting Privacy</div>
                    <div class="force-item">Judge 18: Restrained Speech</div>
                </div>
                <button onclick="checkAccess(3)" class="week-link paid">Enter Sacred Gateway ‚Üí</button>
            </div>

            <!-- Week 4: The Solar Path (PAID) -->
            <div class="week-card paid">
                <div class="week-header">
                    <div class="week-number">4</div>
                    <div class="force-count">Judges 22-28</div>
                </div>
                <h3>The Solar Path</h3>
                <div class="kemetic-name">Righteous Action & Discernment</div>
                <div class="week-theme">
                    Righteous action and discernment. Learn measured wrath, authentic being, earth stewardship, and constructive speech.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Judge 22: Non-Terrorizing</div>
                    <div class="force-item">Judge 23: Pattern Integrity</div>
                    <div class="force-item">Judge 24: Measured Wrath</div>
                    <div class="force-item">Judge 25: Authentic Being</div>
                </div>
                <button onclick="checkAccess(4)" class="week-link paid">Enter Sacred Gateway ‚Üí</button>
            </div>

            <!-- Week 5: The Divine Honor (PAID) -->
            <div class="week-card paid">
                <div class="week-header">
                    <div class="week-number">5</div>
                    <div class="force-count">Judges 29-35</div>
                </div>
                <h3>The Divine Honor</h3>
                <div class="kemetic-name">Temple Guardians & Reverence</div>
                <div class="week-theme">
                    Sacred respect, divine honor, and temple integrity. Become a living sanctuary where reverence informs every action.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Judge 29: Anti-Blasphemy</div>
                    <div class="force-item">Judge 30: Temple Integrity</div>
                    <div class="force-item">Judge 31: Environmental Reverence</div>
                    <div class="force-item">Judge 32: Peace in Sacred Spaces</div>
                </div>
                <button onclick="checkAccess(5)" class="week-link paid">Enter Sacred Gateway ‚Üí</button>
            </div>

            <!-- Week 6: The Right Action (PAID) -->
            <div class="week-card paid">
                <div class="week-header">
                    <div class="week-number">6</div>
                    <div class="force-count">Judges 36-42</div>
                </div>
                <h3>The Right Action</h3>
                <div class="kemetic-name">Balanced Heart & Final Discernment</div>
                <div class="week-theme">
                    Final discernment and stewardship. Practice pure expression, recognize divinity, maintain flow, and sacred stewardship.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Judge 36: Pure Expression</div>
                    <div class="force-item">Judge 37: Recognizing Divinity</div>
                    <div class="force-item">Judge 38: Divine Honor</div>
                    <div class="force-item">Judge 39: Authentic Reputation</div>
                </div>
                <button onclick="checkAccess(6)" class="week-link paid">Enter Sacred Gateway ‚Üí</button>
            </div>

            <!-- Week 7: The Complete Garment (PAID) -->
            <div class="week-card paid">
                <div class="week-header">
                    <div class="week-number">7</div>
                    <div class="force-count">Integration</div>
                </div>
                <h3>The Complete Garment</h3>
                <div class="kemetic-name">Weaving All 42 Threads</div>
                <div class="week-theme">
                    Synthesis and divine embodiment. Weave all forces into your life garment, receive your true name, and become a living pillar of Ma'at.
                </div>
                <div class="forces-preview">
                    <div class="force-item">Synthesis of All Forces</div>
                    <div class="force-item">Personal Ma'at Code Creation</div>
                    <div class="force-item">Initiation Ceremony</div>
                    <div class="force-item">Living Embodiment</div>
                </div>
                <button onclick="checkAccess(7)" class="week-link paid">ìÄ≠ Final Initiation ìÄ≠</button>
            </div>
        </div>

        <div class="purchase-cta">
            <h3>Ready for Full Initiation?</h3>
            <p>Invest $911 once for lifetime access to the complete 42 Forces of Ma'at journey.</p>
            <button onclick="goToPayment()" class="week-link paid" style="display: inline-block; width: auto; font-size: 1.3em; padding: 20px 40px;">
                üèõÔ∏è INVEST $911 FOR FULL ACCESS üèõÔ∏è
            </button>
            <p style="margin-top: 20px; font-size: 0.9em; color: #d4bfff;">
                Includes Weeks 2-7 ‚Ä¢ All workbooks and meditations ‚Ä¢ Lifetime access ‚Ä¢ Free updates forever
            </p>
        </div>

        <div class="footer">
            <p>For guidance on your sacred journey: <strong>templeofmaat@proton.me</strong></p>
            <p>¬© The Hall of Truth ‚Ä¢ Walk in Balance, Speak in Truth, Live in Ma'at</p>
            <p style="font-size:0.9em; margin-top:20px; color:#d4bfff; font-style: italic;">
                "To pass the 42 is to demonstrate that your life was a perfect microcosm of cosmic order."
            </p>
        </div>
    </div>

    <!-- Payment/Token Modal -->
    <div id="paymentModal">
        <div class="modal-content">
            <h2>Sacred Investment Required</h2>
            <p>One-time payment of $911 grants lifetime access to Weeks 2-7 of the 42 Forces of Ma'at.</p>
            
            <div style="margin: 25px 0; padding: 20px; background: rgba(255, 215, 0, 0.1); border-radius: 10px;">
                <div style="font-size: 2.5em; color: #FFD700; font-weight: bold;">$911</div>
                <div style="color: #d4bfff;">One-time payment ‚Ä¢ Lifetime access</div>
            </div>
            
            <button onclick="goToPayment()" class="modal-button">
                üèõÔ∏è Make Sacred Investment ($911)
            </button>
            
            <p style="margin: 25px 0 15px; color: #d4bfff;">Already paid? Enter your access token:</p>
            
            <input type="text" id="tokenInput" class="token-input" placeholder="Paste token here">
            
            <div>
                <button onclick="enterToken()" class="secondary-button">Validate Token</button>
                <button onclick="closeModal()" class="cancel-button">Cancel</button>
            </div>
            
            <p style="font-size: 0.9em; margin-top: 25px; color: #999;">
                After payment, you will receive a token via email.
            </p>
        </div>
    </div>

    <script>
        // Animated hieroglyph background (gold-colored glyphs)
        const bg = document.getElementById('hieroglyph-bg');
        const glyphs = ["ìÄ≠", "ìÅ¶", "ìÉ©", "ìÜ£", "ìÇÄ", "ìÉí", "ìÖì"];

        for (let i = 0; i < 25; i++) {
            const glyph = document.createElement('div');
            glyph.className = 'glyph';
            glyph.textContent = glyphs[Math.floor(Math.random() * glyphs.length)];
            glyph.style.left = Math.random() * 100 + '%';
            glyph.style.fontSize = (Math.random() * 1 + 1) + 'em';
            glyph.style.animationDuration = (Math.random() * 20 + 30) + 's';
            glyph.style.opacity = Math.random() * 0.1 + 0.02;
            bg.appendChild(glyph);
        }

        // Subtle hover interaction on week cards
        document.querySelectorAll('.week-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.zIndex = '10';
            });
            card.addEventListener('mouseleave', function() {
                this.style.zIndex = '1';
            });
        });

        // Check access for specific week
        function checkAccess(weekNum) {
            if (weekNum === 1) {
                window.location.href = 'portal/week1/index.html';
                return;
            }
            
            if (window.maatAuth && window.maatAuth.checkWeek(weekNum)) {
                // Has access - redirect to week page
                window.location.href = 'portal/week' + weekNum + '/index.html';
            } else {
                // No access - show payment modal
                document.getElementById('paymentModal').style.display = 'flex';
                // Store which week they tried to access
                window.currentWeek = weekNum;
            }
        }
        
        // Go to Stripe payment
        function goToPayment() {
            window.location.href = 'https://buy.stripe.com/5kQcN55xt2EY8ycbZF77O0w';
        }
        
        // Enter and validate token
        function enterToken() {
            const token = document.getElementById('tokenInput').value.trim();
            if (!token) {
                alert('Please enter your access token');
                return;
            }
            
            if (window.maatAuth) {
                window.maatAuth.saveToken(token);
                alert('Access granted! You now have access to all paid weeks.');
                closeModal();
                
                // If they were trying to access a specific week, go there
                if (window.currentWeek) {
                    window.location.href = 'portal/week' + window.currentWeek + '/index.html';
                } else {
                    location.reload(); // Refresh to update buttons
                }
            } else {
                alert('Authentication system not loaded. Please refresh page.');
            }
        }
        
        // Close modal
        function closeModal() {
            document.getElementById('paymentModal').style.display = 'none';
            document.getElementById('tokenInput').value = '';
            window.currentWeek = null;
        }
        
        // On page load, check if user already has access
        document.addEventListener('DOMContentLoaded', function() {
            // Wait a moment for auth to load
            setTimeout(function() {
                if (window.maatAuth && window.maatAuth.hasAccess()) {
                    // User has paid access - update all buttons to links
                    const buttons = document.querySelectorAll('button.week-link.paid');
                    buttons.forEach(btn => {
                        const onclickAttr = btn.getAttribute('onclick');
                        if (onclickAttr) {
                            const match = onclickAttr.match(/checkAccess\((\d+)\)/);
                            if (match) {
                                const weekNum = match[1];
                                // Create new link
                                const link = document.createElement('a');
                                link.href = 'portal/week' + weekNum + '/index.html';
                                link.className = 'week-link paid';
                                link.innerHTML = btn.innerHTML;
                                link.style.cursor = 'pointer';
                                // Replace button with link
                                btn.parentNode.replaceChild(link, btn);
                            }
                        }
                    });
                    
                    // Add logout button
                    const logoutBtn = document.createElement('button');
                    logoutBtn.innerHTML = 'ìÑÇ Logout';
                    logoutBtn.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: rgba(255, 215, 0, 0.2);
                        color: #FFD700;
                        border: 1px solid #FFD700;
                        padding: 10px 20px;
                        border-radius: 5px;
                        cursor: pointer;
                        z-index: 10000;
                        font-family: 'Georgia', serif;
                    `;
                    logoutBtn.onclick = function() {
                        if (confirm('Logout from sacred portal?')) {
                            window.maatAuth.clearAccess();
                            location.reload();
                        }
                    };
                    document.body.appendChild(logoutBtn);
                    
                    // Show access badge
                    const accessBadge = document.createElement('div');
                    accessBadge.className = 'payment-badge';
                    accessBadge.innerHTML = 'ìÇÄ Full Access Granted ìÇÄ';
                    accessBadge.style.marginTop = '20px';
                    document.querySelector('.portal-description').appendChild(accessBadge);
                    
                    // Remove purchase CTAs
                    document.querySelectorAll('.purchase-cta').forEach(cta => {
                        cta.style.display = 'none';
                    });
                }
            }, 500);
        });
        
        // Close modal on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
        
        // Close modal when clicking outside
        document.getElementById('paymentModal').addEventListener('click', function(e) {
            if (e.target.id === 'paymentModal') {
                closeModal();
            }
        });
    </script>
</body>
</html>
