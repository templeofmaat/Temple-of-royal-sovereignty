<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Week 4: The Solar Path - Forces 22–28 of Ma'at</title>

<!-- ================= AUTH + TOKEN GATE ================= -->
<script>
(function () {
    const LOGIN_URL = "https://www.tors.life/hall-of-truth.html";
    const WEEK_REQUIRED = 4;

    function deny(msg) {
        alert(msg);
        window.location.replace(LOGIN_URL);
    }

    let user = null;

    try {
        const raw = localStorage.getItem("tors_sacred_current");
        if (!raw) return deny("Sacred access required. Login first.");
        user = JSON.parse(raw);
    } catch (e) {
        localStorage.removeItem("tors_sacred_current");
        return deny("Session corrupted. Please login again.");
    }

    if (!user.token) return deny("Invalid session token.");
    if (user.expires && Date.now() > user.expires) {
        localStorage.removeItem("tors_sacred_current");
        return deny("Session expired. Please login again.");
    }
    if (!Array.isArray(user.weeks) || !user.weeks.includes(WEEK_REQUIRED)) {
        return deny("Week 4 access not authorized.");
    }

    window.TORS_USER = user;
})();
</script>
<!-- ==================================================== -->

<style>
body.temple-page{
    background:#140025;
    color:#f7eaff;
    font-family:Georgia,serif;
    margin:0;
    padding:40px 20px;
    min-height:100vh
}
h1,h2,h3,h4{color:#FFD700}
.container{
    max-width:1200px;
    margin:auto;
    background:rgba(255,255,255,.06);
    padding:50px;
    border-radius:12px;
    border:1px solid #FFD700
}
.sun-disc{
    position:fixed;
    bottom:20px;
    right:20px;
    width:55px;
    height:55px;
    border-radius:50%;
    background:rgba(255,215,0,.25);
    border:1px solid #FFD700;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    font-size:1.4em;
    color:#FFD700;
    z-index:999
}
</style>
</head>

<body class="temple-page">

<div class="sun-disc" id="sunDisc">☀️</div>

<div class="container">
    <h1>Week 4 — The Solar Path</h1>
    <p><strong>Authenticated Initiate:</strong> <span id="userName"></span></p>
    <p>Forces 22–28 • Righteous Action • Discernment</p>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
    const user = window.TORS_USER;

    document.getElementById("userName").textContent = user.name || "Initiate";

    // Logout control
    const logout = document.createElement("button");
    logout.textContent = "Logout";
    logout.style.cssText = `
        position:fixed;top:20px;right:20px;
        background:rgba(255,215,0,.2);
        color:#FFD700;
        border:1px solid #FFD700;
        padding:10px 20px;
        cursor:pointer;
        z-index:1000
    `;
    logout.onclick = () => {
        localStorage.removeItem("tors_sacred_current");
        window.location.replace("https://www.tors.life/hall-of-truth.html");
    };
    document.body.appendChild(logout);

    // Sun Disc interaction
    document.getElementById("sunDisc").onclick = () => {
        alert("Solar Path active. Perform sunrise alignment with discernment.");
    };
});
</script>

</body>
</html>
